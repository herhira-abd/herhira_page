<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jauge</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  
    <script src="https://bernii.github.io/gauge.js/dist/gauge.min.js"></script>



</head>
<body>
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container-fluid">
            <ul class="navbar-nav d-flex flex-row">
              

                <li class="nav-item mx-5">
                    <a class="nav-link text-dark" href="https://www.linkedin.com/in/abdel-rahmane-herhira-a8094417a/" target="_blank" aria-label="LinkedIn" title="LinkedIn">
                        <i class="fab fa-linkedin" style="font-size: 30px; color: #0077B5;"></i>
                        Linkedin : Herhira abdel rahmane
                    </a>
                </li>

                <li class="nav-item mx-5">
                    <a type="button" class="btn btn-success" href="https://raw.githubusercontent.com/herhira-abd/vba_module/refs/heads/main/gauge.xlsx">
                        <i class="fa-solid fa-gauge"></i>
                        télécharger le fichier excel .... ici</a>
                 
                </li>

                <li class="nav-item mx-5">
                    <a class="nav-link" href="https://github.com/herhira-abd/vba_module" target="_blank" >
                        <i class="fab fa-github" style="font-size: 30px; color: #0077B5;"></i>
                        Githib rep
                    </a>
              
                </li>
            </ul>
            
               

        </div>    



          
    </nav>




<div class="container-fluid">
    <div class="row">
            <div class="col-12 col-md-3 bg-body-tertiary py-5 px-2" style="height: 100vh; overflow-y: scroll;" id="param">
                <div class="input-group mb-3">
                    <span class="input-group-text">Valeur réalisé</span>
                    <input type="number" class="form-control"   aria-describedby="i1" id="i1">
                </div>

                <div class="input-group mb-3">
                    <span class="input-group-text">Objectif</span>
                    <input type="number" class="form-control"  aria-describedby="i2" id="i2">
                </div>

                <div class="input-group mb-3">
                    <span class="input-group-text">taux</span>
                    <input type="number" class="form-control"  aria-describedby="i3" id="i3" value="55">
                    <span class="input-group-text">%</span>
                </div>
            
                <div class="input-group mb-3">
                    <span class="input-group-text">Couleur jauge</span>
                   <div class="col-3 ms-2"> <input type="color" class="form-control"  aria-describedby="i4" id="i4"  value="#ff0000"></div>
                 
                </div>

                <div class="input-group mb-3">
                    <span class="input-group-text">Couleur fleche</span>
                    <div class="col-3 ms-2">  <input type="color" class="form-control"  aria-describedby="i6" id="i6"  > </div>
                 
                </div>

                <div class="input-group mb-3">
                    <span class="input-group-text">Valeur Max</span>
                    <input type="number" value="100" class="form-control"  aria-describedby="i5" id="i5" >
                 
                </div>


                
                    <span class="input-group-text">Couleur pourcentage :</span> 

                    <div class="input-group mb-1"> <input type="number" class="form-control"   id="7i1a"  min="0" max="100" value="0">     <span class="input-group-text">%</span> <input type="color" class="form-control"   id="7i1b"  value="#ff0000">    </div>
                    <div class="input-group mb-1"> <input type="number" class="form-control"   id="7i2a"  min="0" max="100" value="30">     <span class="input-group-text">%</span> <input type="color" class="form-control"   id="7i2b"  value="#ffff00">    </div>
                    <div class="input-group mb-1"> <input type="number" class="form-control"   id="7i3a"  min="0" max="100" value="60">     <span class="input-group-text">%</span> <input type="color" class="form-control"   id="7i3b"  value="#00ff00">    </div>
                 
             
                    <div class="input-group my-3">
                        <span class="input-group-text col-12">Valeur graduation (séparée par vergule)</span>
                        <input type="text" value="0,30,50,75,100" class="form-control" id="i8"  >
                    
                    </div>

                    <span class="input-group-text">Couleur Zone :</span> 

                    <div class="input-group mb-1">  <span class="input-group-text">de</span>  <input type="number" class="form-control"   id="9i1a"  min="0" max="100" value="0">     <span class="input-group-text"> à : </span>   <input type="number" class="form-control"   id="9i1c"  min="0" max="100" value="30">   <input type="color" class="form-control"   id="9i1b"  value="#ff0000">    </div>
                    <div class="input-group mb-1">  <span class="input-group-text">de</span>  <input type="number" class="form-control"   id="9i2a"  min="0" max="100" value="30">     <span class="input-group-text"> à : </span>   <input type="number" class="form-control"   id="9i2c"  min="0" max="100" value="60">   <input type="color" class="form-control"   id="9i2b"  value="#ffff00">    </div>
                    <div class="input-group mb-1">  <span class="input-group-text">de</span>  <input type="number" class="form-control"   id="9i3a"  min="0" max="100" value="60">     <span class="input-group-text"> à : </span>   <input type="number" class="form-control"   id="9i3c"  min="0" max="100" value="100">   <input type="color" class="form-control"   id="9i3b"  value="#00ff00">    </div>                 
    
            </div>

            <div class="col-12 col-md-9" style="height: 100vh;">
              
            
                <div class="row" >
                    <div class="col-12 col-md-4" > 
                        <canvas class="shadow" id="g1" ></canvas>
                    </div>
                    <div class="col-12 col-md-4" >
                        <canvas class="shadow" id="g2" ></canvas>
                     </div>

                     <div class="col-12 col-md-4" > 
                        <canvas class="shadow" id="g3" ></canvas>
                    </div>
                   
                </div>

                <div class="row mt-4" >
                    
                    <div class="col-12 col-md-4" >
                        <canvas class="shadow" id="g4" ></canvas>
                     </div>
                
                    <div class="col-12 col-md-4" > 
                        <canvas class="shadow" id="g5" ></canvas>
                    </div>
                    <div class="col-12 col-md-4" >
                        <canvas class="shadow" id="g6" ></canvas>
                     </div>
                </div>

               <div class="row mt-4" >
                    <div class="col-12 col-md-4" > 
                        <canvas class="shadow" id="g7" ></canvas>
                    </div>

                    <div class="col-12 col-md-4" >
                        <canvas class="shadow" id="g8" ></canvas>
                     </div>
                   
                    <div class="col-12 col-md-4" > 
                        <canvas class="shadow" id="g9" ></canvas>
                    </div>
                    
                </div>
                
                <div class="row mt-4" >
                    <div class="col-12 col-md-4" >
                        <canvas class="shadow" id="g10" ></canvas>
                     </div>
                   
                
                 </div>
                
                   
            
            
            </div>

    </div>
</div>
<script>
    const data = [
        {
            angle:0.15, lineWidth: 0.3, radiusScale: 1, pointer: {
                                length: 0.5,
                                strokeWidth: 0.035, 
                            },

        },
        {
            angle:0, lineWidth: 0.3, radiusScale: 1, pointer: {
                                length: 0.3, 
                                strokeWidth: 0.035, 
                            },

        },

        {
            angle:0, lineWidth: 0.5, radiusScale: 1, pointer: {
                                length: 0.9,
                                strokeWidth: 0.035, 
                            },

        },
        {
            angle:0, lineWidth: 0.3, radiusScale: 1, pointer: {
                                length: 0.4, 
                                strokeWidth: 0.11,   },
         },
        
        
        {
            angle:0, lineWidth: 0.3, radiusScale: 1, pointer: {
                                length: 0.3, 
                                strokeWidth: 0.035,   },
         },
         
         {
            angle:0, lineWidth: 0.3, radiusScale: 1, pointer: {
                                length: 0.3, 
                                strokeWidth: 0.035,   },
         },
         {
            angle:0, lineWidth: 0.3, radiusScale: 1, pointer: {
                                length: 0.3, 
                                strokeWidth: 0.035,   },
         },
         {
            angle:0, lineWidth: 0.3, radiusScale: 1, pointer: {
                                        length: 0, strokeWidth: 0,
                                 },
         },
         {
            angle:0, lineWidth: 0.3, radiusScale: 1, pointer: {
                                        length: 0.50, strokeWidth: 0.055,
                                 },
                                 renderTicks: {
                                                divisions: 5,
                                                divWidth: 2,
                                                divLength: 0.7,
                                                divColor: "#000000",
                                                subDivisions: 5,
                                                subLength: 0.2,
                                                subWidth: 0.3,
                                                subColor: "#000000"
                            }
         },
         {
            angle:0, lineWidth: 0.3, radiusScale: 1, pointer: {
                                        length: 0.50, strokeWidth: 0.055,
                                 },
                                 renderTicks: {
                                                divisions: 5,
                                                divWidth: 2,
                                                divLength: 0.7,
                                                divColor: "#000000",
                                                subDivisions: 5,
                                                subLength: 0.2,
                                                subWidth: 0.3,
                                                subColor: "#000000"
                            }
         },
    ]


var opts = {                                                    
                            limitMax: false,     
                            limitMin: false,    
                            colorStart:'red' ,   
                            colorStop:'red' ,    
                            strokeColor: '#EEEEEE',
                            generateGradient: true,
                            highDpiSupport: true,    
  
};
function draw(){
 
const perst_c =[]
const zone_c =[]
for(let x=1;x<4;x++){
    var a = parseFloat(document.getElementById("7i"+x+"a").value)/100
    var b = document.getElementById("7i"+x+"b").value
    perst_c.push([a,b])
    var c = parseFloat(document.getElementById("9i"+x+"a").value)
    var d = document.getElementById("9i"+x+"b").value
    var e = parseFloat(document.getElementById("9i"+x+"c").value)
    zone_c.push({strokeStyle:d,min:c,max:e})
}
data[4].percentColors = perst_c

const labels = (document.getElementById("i8").value).split(",")
labels.forEach((e,i)=> {labels[i] =parseInt(e)})
data[5].staticLabels= {
  font: "15px sans-serif",  // Specifies font
  labels: labels,  // Print labels at these values
}
data[9].staticLabels= {
  font: "15px sans-serif",  // Specifies font
  labels: labels,  // Print labels at these values
}
data[5].percentColors = perst_c
data[6].staticZones = zone_c




const gauge_clr = document.getElementById("i4").value
const max_v = document.getElementById("i5").value
const fleche_clr = document.getElementById("i6").value

let taux = (document.getElementById("i1").value/document.getElementById("i2").value)*100
if(isNaN(taux)){taux =0}
if(document.getElementById("i3").value !=="" && document.getElementById("i2").value ===""){taux = parseFloat(document.getElementById("i3").value)}

document.getElementById("i3").value = taux.toFixed(2)


data.forEach((e,i)=>{
    e.pointer.color = fleche_clr
  var newopts = {...opts,...e, colorStart:gauge_clr,colorStop:gauge_clr} 
  var target = document.getElementById('g'+(i+1));
  
  var gauge = new Gauge(target).setOptions(newopts)
  gauge.maxValue = max_v;
  gauge.setMinValue(0);
  gauge.animationSpeed = 60;
  gauge.setTextField("ouiiiiiiiiiiiiiii");
  gauge.set(taux);
})

}

draw()

document.getElementById("param").addEventListener("change",draw)


</script> 

</body>
</html>
